#include<iostream>
#include<stdlib.h>
using namespace std;
enum enChoice
{
	Stone=1,Paper=2,Scissor=3
};
enum enWinner
{
	Player=1, Computer=2,NoWinner=3
};
struct strRound
{
	short RoundNumber = 1;
	enChoice Player;
	enChoice Computer;
	enWinner Winner;
};
struct strGame
{
	short GameRound = 0;
	short Player1Wontimes = 0;
	short ComputerWontimes = 0;
	short DrawTimes = 0;
	enWinner FinalWinner;
};
short ReadRoundNumbers() {
	short Rounds = 0;
	do
	{
		cout << "\nHow Many Rounds 1 to 10\n";
		cin >> Rounds;
	} while (Rounds<1 || Rounds > 10);
	return Rounds;
}
int RandomNumber(int From,int To) {
	return rand() % (To - From + 1) + From;
}
enChoice PlayerChoice() {
	short Choice = 0;
	do
	{
		cout << "\nYour Choice: [1]:Stone, [2]:Paper, [3]:Scissors ? \n";
		cin >> Choice;
	} while (Choice<1|| Choice > 3);
	return (enChoice)Choice;
}
enChoice ComputerChoice() {
	return (enChoice)RandomNumber(1, 3);
}
string ChoiceTostring(enChoice Choice) {
	switch (Choice) {
	case enChoice::Paper:
		return "Paper";
	case enChoice::Scissor:
		return "Scissor";
	case enChoice::Stone:
		return "Stone";
	}
}
string WinnerTostring(enWinner Winner) {
	switch (Winner) {
	case enWinner::Player:
		return "[Player1] ";
	case enWinner::Computer:
		return "[Computer] ";
	case enWinner::NoWinner:
		return "[No Winner] ";

	}
}
enWinner ChoiceWinner(enChoice Player, enChoice Computer) {
	if ((Player== enChoice::Paper&& Computer == enChoice::Paper)||
		(Player == enChoice::Scissor && Computer == enChoice::Scissor)||
		(Player == enChoice::Stone && Computer == enChoice::Stone)){
		return enWinner::NoWinner;
	}
	else if ((Player == enChoice::Paper&& Computer== enChoice::Stone)||
		(Player == enChoice::Stone && Computer == enChoice::Scissor)||
		(Player == enChoice::Scissor && Computer == enChoice::Paper))
	{
		return enWinner::Player;
	}
	else
	{
		return enWinner::Computer;
	}
}
enWinner FinalWinner(short Player1Wontimes,short ComputerWontimes) {
	if (Player1Wontimes > ComputerWontimes)
		return enWinner::Player;
	else if(Player1Wontimes < ComputerWontimes)
		return enWinner::Computer;
	else
		return enWinner::NoWinner;
}
void PrintRoundResult(strRound Round) {
	cout << "_________________Round ["<< Round.RoundNumber <<"]_________________\n\n";
	cout << "Player1 Choice  : " << ChoiceTostring(Round.Player)<<endl;
	cout << "Computer Choice : " << ChoiceTostring(Round.Computer)<<endl;
	cout << "Round Winner    : " << WinnerTostring(ChoiceWinner(Round.Player,Round.Computer))<<endl;
	cout << "___________________________________________\n";
}
void PrintHeaderResult(string Message) {
	cout << "\t\t\t______________________________________________________\n\n";
	cout << "\t\t\t\t\t " << Message << endl;
	cout << "\t\t\t______________________________________________________\n\n";

}
void PrintGameResult(strGame Game) {
	PrintHeaderResult("+++ G a m e  O v e r +++");
	cout << "\t\t\t___________________[ Game Results ]___________________\n\n";
	cout << "\t\t\tGame Rounds        :" << Game.GameRound << endl;
	cout << "\t\t\tPlayer1 Won times  :" << Game.Player1Wontimes << endl;
	cout << "\t\t\tComputer Won times :" << Game.ComputerWontimes << endl;
	cout << "\t\t\tFinal Winner       :" << WinnerTostring(FinalWinner(Game.Player1Wontimes, Game.ComputerWontimes))  << endl;
	cout << "\t\t\t______________________________________________________\n\n";	
}
strRound PlayRound(short RoundNumber) {
	strRound Round;
	cout << "\nRound ["<< RoundNumber <<"] begins:\n";
	Round.Player = PlayerChoice();
	Round.Computer = ComputerChoice();
	Round.Winner = ChoiceWinner(Round.Player,Round.Computer);
	Round.RoundNumber = RoundNumber;
	PrintRoundResult(Round);
	return Round;
}
strGame PlayGame() {
	strGame Game;
	short RoundsNumber = ReadRoundNumbers();
	Game.GameRound = RoundsNumber;
	for (int  i = 1; i <= RoundsNumber; i++)
	{
		strRound Round=PlayRound(i);
		if (Round.Winner== enWinner::Computer)
		{
			Game.ComputerWontimes++;
		}
		else if(Round.Winner == enWinner::Player)
		{
			Game.Player1Wontimes++;
		}
		else
		{
			Game.DrawTimes++;
		}
	}
	return Game;
}

void StartGame() {
	char PlayAgain = 'y';
	do
	{
		system("cls");
		strGame Game=PlayGame();
		PrintGameResult(Game);
		cout << "\nDo you want to play again? Y/N?\n";
		cin >> PlayAgain;
	} while (PlayAgain=='y'|| PlayAgain == 'Y');
}
int main() {
	srand((unsigned)time(NULL));
	StartGame();
}
